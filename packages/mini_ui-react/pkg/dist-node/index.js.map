{"version":3,"file":"index.js","sources":["../dist-src/Image/useImgLazyLoad.js","../dist-src/Image/useIEObjectFitPolyfill.js","../dist-src/Image/defaults.js","../dist-src/Image/useContentfulImage.js","../dist-src/Image/useSanityImage.js","../dist-src/Image/index.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nconst useImgLazyLoad = url => {\n    const lazyLoad = typeof url !== 'undefined';\n    const [loaded, setLoaded] = useState(!lazyLoad);\n    const [preloaded, setPreloaded] = useState(!lazyLoad);\n    const onLoaded = useCallback(() => {\n        setLoaded(true);\n    }, [setLoaded]);\n    useEffect(() => {\n        if (typeof url === 'undefined')\n            return;\n        const lowImg = new Image();\n        lowImg.src = url;\n        lowImg.onload = () => {\n            setPreloaded(true);\n        };\n    }, [url, setPreloaded, lazyLoad]);\n    return { loaded, preloaded, onLoaded };\n};\nexport default useImgLazyLoad;\n","import { useRef, useEffect } from 'react';\nconst useIEObjectFitPolyfill = ({ objectFit, objectPosition, }) => {\n    const imgRef = useRef(null);\n    useEffect(() => {\n        const testImg = document.createElement('img');\n        if (typeof testImg.style.objectFit === 'undefined' ||\n            typeof testImg.style.objectPosition === 'undefined') {\n            import('object-fit-images').then(({ default: ObjectFitImages }) => ObjectFitImages(imgRef.current));\n        }\n    }, [imgRef]);\n    return {\n        imgRef,\n        polyfillStyle: {\n            objectFit,\n            objectPosition,\n            fontFamily: `\"object-fit: ${objectFit}; object-position: ${objectPosition}\"`,\n        },\n    };\n};\nexport default useIEObjectFitPolyfill;\n","const formats = [\n    {\n        type: 'image/webp',\n        name: 'webp',\n    },\n    {\n        type: 'image/png',\n        name: 'png',\n    },\n    {\n        type: 'image/jpeg',\n        name: 'jpg',\n    },\n];\nconst defaults = {\n    formats,\n};\nexport default defaults;\n","import { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport defaults from './defaults';\nconst useContentfulImage = ({ baseUrl, size, formats = defaults.formats, }) => {\n    const src = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        format: 'original',\n    }), [baseUrl, size]);\n    const lowResSrc = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        size: { width: 30 },\n        format: 'jpg',\n        quality: 50,\n    }), [baseUrl]);\n    const srcSets = useMemo(() => formats.map(({ type, name }) => ({\n        srcSet: `${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n        })}, \n    ${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n            resolution: 1.5,\n        })} 1.5x, \n    ${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n            resolution: 2,\n        })} 2x`,\n        type,\n    })), [formats, baseUrl]);\n    return { src, srcSets, lowResSrc, size };\n};\nexport default useContentfulImage;\n","import { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport defaults from './defaults';\nconst useSanityImage = ({ baseUrl, size, blurUp, quality, formats = defaults.formats, }) => {\n    const urlConfig = useMemo(() => ({\n        baseUrl,\n        size,\n        quality,\n    }), [size, baseUrl, quality]);\n    const src = useMemo(() => urlBuilder.getSanityUrl({\n        baseUrl,\n        format: 'original',\n        size,\n    }), [baseUrl, size]);\n    const lowResSrc = useMemo(() => blurUp\n        ? urlBuilder.getSanityUrl({\n            baseUrl,\n            size: { width: 30 },\n            format: 'original',\n            quality: 50,\n        })\n        : undefined, [baseUrl]);\n    const srcSets = useMemo(() => formats.map(({ type, name }) => ({\n        srcSet: `${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n        })}, \n    ${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n            resolution: 1.5,\n        })} 1.5x, \n    ${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n            resolution: 2,\n        })} 2x`,\n        type,\n    })), [formats, baseUrl]);\n    return { src, srcSets, lowResSrc, size };\n};\nexport default useSanityImage;\n","import React from 'react';\nimport useImgLazyLoad from './useImgLazyLoad';\nimport useIEObjectFitPolyfill from './useIEObjectFitPolyfill';\nconst Image = ({ size, srcSets, style, imgStyle, aspectRatio, className, imgClassName, lowResSrc, ...props }) => {\n    const { loaded, preloaded, onLoaded } = useImgLazyLoad(lowResSrc);\n    const { imgRef, polyfillStyle } = useIEObjectFitPolyfill({\n        objectFit: imgStyle?.objectFit ? imgStyle.objectFit : 'cover',\n        objectPosition: imgStyle?.objectPosition\n            ? imgStyle.objectPosition\n            : 'center',\n    });\n    return (React.createElement(\"div\", { style: {\n            width: size.height ? size.height * aspectRatio : undefined,\n            height: size.height,\n            maxHeight: '100%',\n            maxWidth: '100%',\n            lineHeight: 0,\n            filter: loaded ? 'blur(0px)' : 'blur(10px)',\n            transition: 'filter 200ms ease',\n            backgroundPosition: 'center',\n            backgroundSize: 'cover',\n            backgroundImage: lowResSrc !== undefined ? `url(${lowResSrc})` : undefined,\n            ...style,\n        }, className: className }, preloaded && (React.createElement(\"picture\", { style: { lineHeight: 0 } },\n        srcSets &&\n            srcSets.map(srcSet => React.createElement(\"source\", Object.assign({ key: srcSet.type }, srcSet))),\n        React.createElement(\"img\", Object.assign({ ref: imgRef, className: imgClassName, style: {\n                width: '100%',\n                height: '100%',\n                opacity: loaded ? 1 : 0,\n                transition: 'opacity 200ms ease',\n                objectFit: 'cover',\n                objectPosition: 'center',\n                boxSizing: 'border-box',\n                ...imgStyle,\n                ...polyfillStyle,\n            }, loading: \"lazy\", onLoad: onLoaded }, props))))));\n};\nexport default Image;\nexport { useImgLazyLoad, Image };\nexport { default as useContentfulImage } from './useContentfulImage';\nexport { default as useSanityImage } from './useSanityImage';\nexport { default as useIEObjectFitPolyfill } from './useIEObjectFitPolyfill';\n"],"names":["useImgLazyLoad","url","lazyLoad","loaded","setLoaded","useState","preloaded","setPreloaded","onLoaded","useCallback","useEffect","lowImg","Image","src","onload","useIEObjectFitPolyfill","objectFit","objectPosition","imgRef","useRef","testImg","document","createElement","style","then","default","ObjectFitImages","current","polyfillStyle","fontFamily","formats","type","name","defaults","useContentfulImage","baseUrl","size","useMemo","urlBuilder","getContentfulUrl","format","lowResSrc","width","quality","srcSets","map","srcSet","resolution","useSanityImage","blurUp","urlConfig","getSanityUrl","undefined","imgStyle","aspectRatio","className","imgClassName","props","React","height","maxHeight","maxWidth","lineHeight","filter","transition","backgroundPosition","backgroundSize","backgroundImage","Object","assign","key","ref","opacity","boxSizing","loading","onLoad"],"mappings":"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"}