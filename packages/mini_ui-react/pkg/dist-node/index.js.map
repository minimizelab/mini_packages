{"version":3,"file":"index.js","sources":["../dist-src/test.js","../dist-src/Image/useImgLazyLoad.js","../dist-src/Image/defaults.js","../dist-src/Image/Source.js","../dist-src/Image/index.js"],"sourcesContent":["import React from 'react';\nconst Test = () => React.createElement(\"div\", null, \"Hello!\");\nexport default Test;\n","import { useState, useEffect, useCallback } from 'react';\nconst useImgLazyLoad = url => {\n    const [loaded, setLoaded] = useState(false);\n    const [preloaded, setPreloaded] = useState(false);\n    const onLoaded = useCallback(() => {\n        setLoaded(true);\n    }, [setLoaded]);\n    useEffect(() => {\n        const lowImg = new Image();\n        lowImg.src = url;\n        lowImg.onload = () => {\n            setPreloaded(true);\n        };\n    }, [url, setPreloaded]);\n    return { loaded, preloaded, onLoaded };\n};\nexport default useImgLazyLoad;\n","const formats = [\n    {\n        type: 'image/webp',\n        name: 'webp',\n    },\n    {\n        type: 'image/png',\n        name: 'png',\n    },\n    {\n        type: 'image/jpeg',\n        name: 'jpg',\n    },\n];\nconst defaults = {\n    formats,\n};\nexport default defaults;\n","// @flow\nimport React from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nconst Source = ({ format, ...rest }) => (React.createElement(\"source\", { srcSet: `${urlBuilder.getContentfulUrl({ format: format.name, ...rest })}, \n    ${urlBuilder.getContentfulUrl({\n        format: format.name,\n        resolution: 1.5,\n        ...rest,\n    })} 1.5x, \n    ${urlBuilder.getContentfulUrl({\n        format: format.name,\n        resolution: 2,\n        ...rest,\n    })} 2x`, type: format.type }));\nexport default Source;\n","import React, { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport useImgLazyLoad from './useImgLazyLoad';\nimport defaults from './defaults';\nimport Source from './Source';\nconst getAspectRatio = (details, size) => {\n    const original = details.image.width / details.image.height;\n    const calcSize = {\n        width: size && size.width !== undefined ? size.width : details.image.width,\n        height: size && size.height !== undefined ? size.height : details.image.height,\n    };\n    if (size && size.height !== undefined && size.width !== undefined) {\n        return { aspectRatio: size.width / size.height, calcSize };\n    }\n    return { aspectRatio: original, calcSize };\n};\nconst Image = ({ baseUrl, details, size, quality, fit, style, imgStyle, className, imgClassName, alt, ...props }) => {\n    const { aspectRatio, calcSize } = useMemo(() => getAspectRatio(details, size), [details, size]);\n    const lowResUrl = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        size: { width: 30 },\n        format: 'jpg',\n        quality: 50,\n    }), [baseUrl]);\n    const { loaded, preloaded, onLoaded } = useImgLazyLoad(lowResUrl);\n    return (React.createElement(\"div\", { style: {\n            width: calcSize.width,\n            height: calcSize.width / aspectRatio,\n            maxHeight: '100%',\n            maxWidth: '100%',\n            lineHeight: 0,\n            filter: loaded ? 'blur(0px)' : 'blur(10px)',\n            transition: 'filter 200ms ease',\n            backgroundPosition: 'center',\n            backgroundSize: 'cover',\n            backgroundImage: !loaded ? `url(${lowResUrl})` : undefined,\n            ...style,\n        }, className: className }, preloaded && (React.createElement(\"picture\", { style: { lineHeight: 0 } },\n        defaults.formats.map(format => (React.createElement(Source, { key: format.type, baseUrl: baseUrl, size: size, fit: fit, quality: quality, format: format }))),\n        React.createElement(\"img\", Object.assign({ className: imgClassName, style: {\n                width: '100%',\n                height: '100%',\n                opacity: loaded ? 1 : 0,\n                transition: 'opacity 200ms ease',\n                objectFit: 'cover',\n                objectPosition: 'center',\n                boxSizing: 'border-box',\n                ...imgStyle,\n            }, src: urlBuilder.getContentfulUrl({\n                baseUrl,\n                size,\n                fit,\n                format: 'original',\n                quality,\n            }), loading: \"lazy\", onLoad: onLoaded, alt: alt }, props))))));\n};\nexport default Image;\n"],"names":["Test","React","createElement","useImgLazyLoad","url","loaded","setLoaded","useState","preloaded","setPreloaded","onLoaded","useCallback","useEffect","lowImg","Image","src","onload","formats","type","name","defaults","Source","format","rest","srcSet","urlBuilder","getContentfulUrl","resolution","getAspectRatio","details","size","original","image","width","height","calcSize","undefined","aspectRatio","baseUrl","quality","fit","style","imgStyle","className","imgClassName","alt","props","useMemo","lowResUrl","maxHeight","maxWidth","lineHeight","filter","transition","backgroundPosition","backgroundSize","backgroundImage","map","key","Object","assign","opacity","objectFit","objectPosition","boxSizing","loading","onLoad"],"mappings":"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"}