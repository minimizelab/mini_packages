{"version":3,"file":"index.js","sources":["../dist-src/Image/useImgLazyLoad.js","../dist-src/Image/defaults.js","../dist-src/Image/useContentfulImage.js","../dist-src/Image/useSanityImage.js","../dist-src/Image/index.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nconst useImgLazyLoad = url => {\n    const lazyLoad = url !== undefined;\n    const [loaded, setLoaded] = useState(!lazyLoad);\n    const [preloaded, setPreloaded] = useState(!lazyLoad);\n    const onLoaded = useCallback(() => {\n        setLoaded(true);\n    }, [setLoaded]);\n    useEffect(() => {\n        if (!lazyLoad)\n            return;\n        const lowImg = new Image();\n        lowImg.src = url;\n        lowImg.onload = () => {\n            setPreloaded(true);\n        };\n    }, [url, setPreloaded, lazyLoad]);\n    return { loaded, preloaded, onLoaded };\n};\nexport default useImgLazyLoad;\n","const formats = [\n    {\n        type: 'image/webp',\n        name: 'webp',\n    },\n    {\n        type: 'image/png',\n        name: 'png',\n    },\n    {\n        type: 'image/jpeg',\n        name: 'jpg',\n    },\n];\nconst defaults = {\n    formats,\n};\nexport default defaults;\n","import { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport defaults from './defaults';\nconst useContentfulImage = ({ baseUrl, size, formats = defaults.formats, }) => {\n    const src = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        format: 'original',\n    }), [baseUrl, size]);\n    const lowResSrc = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        size: { width: 30 },\n        format: 'jpg',\n        quality: 50,\n    }), [baseUrl]);\n    const srcSets = useMemo(() => formats.map(({ type, name }) => ({\n        srcSet: `${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n        })}, \n    ${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n            resolution: 1.5,\n        })} 1.5x, \n    ${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n            resolution: 2,\n        })} 2x`,\n        type,\n    })), [formats, baseUrl]);\n    return { src, srcSets, lowResSrc, size };\n};\nexport default useContentfulImage;\n","import { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport defaults from './defaults';\nconst useSanityImage = ({ baseUrl, size, blurUp, quality, formats = defaults.formats, }) => {\n    const urlConfig = useMemo(() => ({\n        baseUrl,\n        size,\n        quality,\n    }), [size, baseUrl, quality]);\n    const src = useMemo(() => urlBuilder.getSanityUrl({\n        baseUrl,\n        format: 'original',\n        size,\n    }), [baseUrl, size]);\n    const lowResSrc = useMemo(() => blurUp\n        ? urlBuilder.getSanityUrl({\n            baseUrl,\n            size: { width: 30 },\n            format: 'original',\n            quality: 50,\n        })\n        : undefined, [baseUrl]);\n    const srcSets = useMemo(() => formats.map(({ type, name }) => ({\n        srcSet: `${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n        })}, \n    ${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n            resolution: 1.5,\n        })} 1.5x, \n    ${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n            resolution: 2,\n        })} 2x`,\n        type,\n    })), [formats, baseUrl]);\n    return { src, srcSets, lowResSrc, size };\n};\nexport default useSanityImage;\n","import React from 'react';\nimport useImgLazyLoad from './useImgLazyLoad';\nconst Image = ({ size, srcSets, style, imgStyle, aspectRatio, className, imgClassName, lowResSrc, ...props }) => {\n    const { loaded, preloaded, onLoaded } = useImgLazyLoad(lowResSrc);\n    return (React.createElement(\"div\", { style: {\n            width: size.height * aspectRatio,\n            height: size.height,\n            maxHeight: '100%',\n            maxWidth: '100%',\n            lineHeight: 0,\n            filter: loaded ? 'blur(0px)' : 'blur(10px)',\n            transition: 'filter 200ms ease',\n            backgroundPosition: 'center',\n            backgroundSize: 'cover',\n            backgroundImage: lowResSrc !== undefined ? `url(${lowResSrc})` : undefined,\n            ...style,\n        }, className: className }, preloaded && (React.createElement(\"picture\", { style: { lineHeight: 0 } },\n        srcSets &&\n            srcSets.map(srcSet => React.createElement(\"source\", Object.assign({ key: srcSet.type }, srcSet))),\n        React.createElement(\"img\", Object.assign({ className: imgClassName, style: {\n                width: '100%',\n                height: '100%',\n                opacity: loaded ? 1 : 0,\n                transition: 'opacity 200ms ease',\n                objectFit: 'cover',\n                objectPosition: 'center',\n                boxSizing: 'border-box',\n                ...imgStyle,\n            }, loading: \"lazy\", onLoad: onLoaded }, props))))));\n};\nexport default Image;\nexport { useImgLazyLoad, Image };\nexport { default as useContentfulImage } from './useContentfulImage';\nexport { default as useSanityImage } from './useSanityImage';\n"],"names":["useImgLazyLoad","url","lazyLoad","undefined","loaded","setLoaded","useState","preloaded","setPreloaded","onLoaded","useCallback","useEffect","lowImg","Image","src","onload","formats","type","name","defaults","useContentfulImage","baseUrl","size","useMemo","urlBuilder","getContentfulUrl","format","lowResSrc","width","quality","srcSets","map","srcSet","resolution","useSanityImage","blurUp","urlConfig","getSanityUrl","style","imgStyle","aspectRatio","className","imgClassName","props","React","createElement","height","maxHeight","maxWidth","lineHeight","filter","transition","backgroundPosition","backgroundSize","backgroundImage","Object","assign","key","opacity","objectFit","objectPosition","boxSizing","loading","onLoad"],"mappings":"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"}