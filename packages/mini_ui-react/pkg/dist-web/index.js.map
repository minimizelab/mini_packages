{"version":3,"file":"index.js","sources":["../dist-src/test.js","../dist-src/Image/useImgLazyLoad.js","../dist-src/Image/defaults.js","../dist-src/Image/Source.js","../dist-src/Image/index.js"],"sourcesContent":["import React from 'react';\nconst Test = () => React.createElement(\"div\", null, \"Hello!\");\nexport default Test;\n","import { useState, useEffect, useCallback } from 'react';\nconst useImgLazyLoad = url => {\n    const [loaded, setLoaded] = useState(false);\n    const [preloaded, setPreloaded] = useState(false);\n    const onLoaded = useCallback(() => {\n        setLoaded(true);\n    }, [setLoaded]);\n    useEffect(() => {\n        const lowImg = new Image();\n        lowImg.src = url;\n        lowImg.onload = () => {\n            setPreloaded(true);\n        };\n    }, [url, setPreloaded]);\n    return { loaded, preloaded, onLoaded };\n};\nexport default useImgLazyLoad;\n","const formats = [\n    {\n        type: 'image/webp',\n        name: 'webp',\n    },\n    {\n        type: 'image/png',\n        name: 'png',\n    },\n    {\n        type: 'image/jpeg',\n        name: 'jpg',\n    },\n];\nconst defaults = {\n    formats,\n};\nexport default defaults;\n","// @flow\nimport React from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nconst Source = ({ format, ...rest }) => (React.createElement(\"source\", { srcSet: `${urlBuilder.getContentfulUrl({ format: format.name, ...rest })}, \n    ${urlBuilder.getContentfulUrl({\n        format: format.name,\n        resolution: 1.5,\n        ...rest,\n    })} 1.5x, \n    ${urlBuilder.getContentfulUrl({\n        format: format.name,\n        resolution: 2,\n        ...rest,\n    })} 2x`, type: format.type }));\nexport default Source;\n","import React, { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport useImgLazyLoad from './useImgLazyLoad';\nimport defaults from './defaults';\nimport Source from './Source';\nconst getAspectRatio = (details, size) => {\n    const original = details.image.width / details.image.height;\n    const calcSize = {\n        width: size && size.width !== undefined ? size.width : details.image.width,\n        height: size && size.height !== undefined ? size.height : details.image.height,\n    };\n    if (size && size.height !== undefined && size.width !== undefined) {\n        return { aspectRatio: size.width / size.height, calcSize };\n    }\n    return { aspectRatio: original, calcSize };\n};\nconst Image = ({ baseUrl, details, size, quality, fit, style, imgStyle, className, imgClassName, alt, ...props }) => {\n    const { aspectRatio, calcSize } = useMemo(() => getAspectRatio(details, size), [details, size]);\n    const lowResUrl = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        size: { width: 30 },\n        format: 'jpg',\n        quality: 50,\n    }), [baseUrl]);\n    const { loaded, preloaded, onLoaded } = useImgLazyLoad(lowResUrl);\n    return (React.createElement(\"div\", { style: {\n            width: calcSize.width,\n            height: calcSize.width / aspectRatio,\n            maxHeight: '100%',\n            maxWidth: '100%',\n            lineHeight: 0,\n            filter: loaded ? 'blur(0px)' : 'blur(10px)',\n            transition: 'filter 200ms ease',\n            backgroundPosition: 'center',\n            backgroundSize: 'cover',\n            backgroundImage: !loaded ? `url(${lowResUrl})` : undefined,\n            ...style,\n        }, className: className }, preloaded && (React.createElement(\"picture\", { style: { lineHeight: 0 } },\n        defaults.formats.map(format => (React.createElement(Source, { key: format.type, baseUrl: baseUrl, size: size, fit: fit, quality: quality, format: format }))),\n        React.createElement(\"img\", Object.assign({ className: imgClassName, style: {\n                width: '100%',\n                height: '100%',\n                opacity: loaded ? 1 : 0,\n                transition: 'opacity 200ms ease',\n                objectFit: 'cover',\n                objectPosition: 'center',\n                boxSizing: 'border-box',\n                ...imgStyle,\n            }, src: urlBuilder.getContentfulUrl({\n                baseUrl,\n                size,\n                fit,\n                format: 'original',\n                quality,\n            }), loading: \"lazy\", onLoad: onLoaded, alt: alt }, props))))));\n};\nexport default Image;\n"],"names":["Image"],"mappings":";;;AACA,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAC;;ACA7D,MAAM,cAAc,GAAG,GAAG,IAAI;AAC9B,IAAI,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;AAChD,IAAI,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;AACtD,IAAI,MAAM,QAAQ,GAAG,WAAW,CAAC,MAAM;AACvC,QAAQ,SAAS,CAAC,IAAI,CAAC,CAAC;AACxB,KAAK,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;AACpB,IAAI,SAAS,CAAC,MAAM;AACpB,QAAQ,MAAM,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;AACnC,QAAQ,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;AACzB,QAAQ,MAAM,CAAC,MAAM,GAAG,MAAM;AAC9B,YAAY,YAAY,CAAC,IAAI,CAAC,CAAC;AAC/B,SAAS,CAAC;AACV,KAAK,EAAE,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,CAAC;AAC5B,IAAI,OAAO,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC;AAC3C,CAAC,CAAC;;ACfF,MAAM,OAAO,GAAG;AAChB,IAAI;AACJ,QAAQ,IAAI,EAAE,YAAY;AAC1B,QAAQ,IAAI,EAAE,MAAM;AACpB,KAAK;AACL,IAAI;AACJ,QAAQ,IAAI,EAAE,WAAW;AACzB,QAAQ,IAAI,EAAE,KAAK;AACnB,KAAK;AACL,IAAI;AACJ,QAAQ,IAAI,EAAE,YAAY;AAC1B,QAAQ,IAAI,EAAE,KAAK;AACnB,KAAK;AACL,CAAC,CAAC;AACF,MAAM,QAAQ,GAAG;AACjB,IAAI,OAAO;AACX,CAAC,CAAC;;AChBF;AACA,AAEA,MAAM,MAAM,GAAG,CAAC,EAAE,MAAM,EAAE,GAAG,IAAI,EAAE,MAAM,KAAK,CAAC,aAAa,CAAC,QAAQ,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,UAAU,CAAC,gBAAgB,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,IAAI,EAAE,GAAG,IAAI,EAAE,CAAC,CAAC;AAClJ,IAAI,EAAE,UAAU,CAAC,gBAAgB,CAAC;AAClC,QAAQ,MAAM,EAAE,MAAM,CAAC,IAAI;AAC3B,QAAQ,UAAU,EAAE,GAAG;AACvB,QAAQ,GAAG,IAAI;AACf,KAAK,CAAC,CAAC;AACP,IAAI,EAAE,UAAU,CAAC,gBAAgB,CAAC;AAClC,QAAQ,MAAM,EAAE,MAAM,CAAC,IAAI;AAC3B,QAAQ,UAAU,EAAE,CAAC;AACrB,QAAQ,GAAG,IAAI;AACf,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;;ACRnC,MAAM,cAAc,GAAG,CAAC,OAAO,EAAE,IAAI,KAAK;AAC1C,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;AAChE,IAAI,MAAM,QAAQ,GAAG;AACrB,QAAQ,KAAK,EAAE,IAAI,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,GAAG,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK;AAClF,QAAQ,MAAM,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS,GAAG,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM;AACtF,KAAK,CAAC;AACN,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE;AACvE,QAAQ,OAAO,EAAE,WAAW,EAAE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,CAAC;AACnE,KAAK;AACL,IAAI,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC;AAC/C,CAAC,CAAC;AACF,MAAMA,OAAK,GAAG,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG,EAAE,GAAG,KAAK,EAAE,KAAK;AACrH,IAAI,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC,MAAM,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;AACpG,IAAI,MAAM,SAAS,GAAG,OAAO,CAAC,MAAM,UAAU,CAAC,gBAAgB,CAAC;AAChE,QAAQ,OAAO;AACf,QAAQ,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE;AAC3B,QAAQ,MAAM,EAAE,KAAK;AACrB,QAAQ,OAAO,EAAE,EAAE;AACnB,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;AACnB,IAAI,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,cAAc,CAAC,SAAS,CAAC,CAAC;AACtE,IAAI,QAAQ,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE;AAChD,YAAY,KAAK,EAAE,QAAQ,CAAC,KAAK;AACjC,YAAY,MAAM,EAAE,QAAQ,CAAC,KAAK,GAAG,WAAW;AAChD,YAAY,SAAS,EAAE,MAAM;AAC7B,YAAY,QAAQ,EAAE,MAAM;AAC5B,YAAY,UAAU,EAAE,CAAC;AACzB,YAAY,MAAM,EAAE,MAAM,GAAG,WAAW,GAAG,YAAY;AACvD,YAAY,UAAU,EAAE,mBAAmB;AAC3C,YAAY,kBAAkB,EAAE,QAAQ;AACxC,YAAY,cAAc,EAAE,OAAO;AACnC,YAAY,eAAe,EAAE,CAAC,MAAM,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS;AACtE,YAAY,GAAG,KAAK;AACpB,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE,SAAS,KAAK,KAAK,CAAC,aAAa,CAAC,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,UAAU,EAAE,CAAC,EAAE,EAAE;AAC5G,QAAQ,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,KAAK,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,GAAG,EAAE,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;AACrK,QAAQ,KAAK,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE;AACnF,gBAAgB,KAAK,EAAE,MAAM;AAC7B,gBAAgB,MAAM,EAAE,MAAM;AAC9B,gBAAgB,OAAO,EAAE,MAAM,GAAG,CAAC,GAAG,CAAC;AACvC,gBAAgB,UAAU,EAAE,oBAAoB;AAChD,gBAAgB,SAAS,EAAE,OAAO;AAClC,gBAAgB,cAAc,EAAE,QAAQ;AACxC,gBAAgB,SAAS,EAAE,YAAY;AACvC,gBAAgB,GAAG,QAAQ;AAC3B,aAAa,EAAE,GAAG,EAAE,UAAU,CAAC,gBAAgB,CAAC;AAChD,gBAAgB,OAAO;AACvB,gBAAgB,IAAI;AACpB,gBAAgB,GAAG;AACnB,gBAAgB,MAAM,EAAE,UAAU;AAClC,gBAAgB,OAAO;AACvB,aAAa,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AAC3E,CAAC,CAAC;;;;"}