{"version":3,"file":"index.js","sources":["../dist-src/Image/useImgLazyLoad.js","../dist-src/Image/defaults.js","../dist-src/Image/useContentfulImage.js","../dist-src/Image/useSanityImage.js","../dist-src/Image/index.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nconst useImgLazyLoad = url => {\n    const lazyLoad = url !== undefined;\n    const [loaded, setLoaded] = useState(!lazyLoad);\n    const [preloaded, setPreloaded] = useState(!lazyLoad);\n    const onLoaded = useCallback(() => {\n        setLoaded(true);\n    }, [setLoaded]);\n    useEffect(() => {\n        if (!lazyLoad)\n            return;\n        const lowImg = new Image();\n        lowImg.src = url;\n        lowImg.onload = () => {\n            setPreloaded(true);\n        };\n    }, [url, setPreloaded, lazyLoad]);\n    return { loaded, preloaded, onLoaded };\n};\nexport default useImgLazyLoad;\n","const formats = [\n    {\n        type: 'image/webp',\n        name: 'webp',\n    },\n    {\n        type: 'image/png',\n        name: 'png',\n    },\n    {\n        type: 'image/jpeg',\n        name: 'jpg',\n    },\n];\nconst defaults = {\n    formats,\n};\nexport default defaults;\n","import { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport defaults from './defaults';\nconst useContentfulImage = ({ baseUrl, size, formats = defaults.formats, }) => {\n    const src = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        format: 'original',\n    }), [baseUrl, size]);\n    const lowResSrc = useMemo(() => urlBuilder.getContentfulUrl({\n        baseUrl,\n        size: { width: 30 },\n        format: 'jpg',\n        quality: 50,\n    }), [baseUrl]);\n    const srcSets = useMemo(() => formats.map(({ type, name }) => ({\n        srcSet: `${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n        })}, \n    ${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n            resolution: 1.5,\n        })} 1.5x, \n    ${urlBuilder.getContentfulUrl({\n            size,\n            baseUrl,\n            format: name,\n            resolution: 2,\n        })} 2x`,\n        type,\n    })), [formats, baseUrl]);\n    return { src, srcSets, lowResSrc, size };\n};\nexport default useContentfulImage;\n","import { useMemo } from 'react';\nimport { urlBuilder } from '@minimizelab/mini_utils';\nimport defaults from './defaults';\nconst useSanityImage = ({ baseUrl, size, blurUp, quality, formats = defaults.formats, }) => {\n    const urlConfig = useMemo(() => ({\n        baseUrl,\n        size,\n        quality,\n    }), [size, baseUrl, quality]);\n    const src = useMemo(() => urlBuilder.getSanityUrl({\n        baseUrl,\n        format: 'original',\n        size,\n    }), [baseUrl, size]);\n    const lowResSrc = useMemo(() => blurUp\n        ? urlBuilder.getSanityUrl({\n            baseUrl,\n            size: { width: 30 },\n            format: 'original',\n            quality: 50,\n        })\n        : undefined, [baseUrl]);\n    const srcSets = useMemo(() => formats.map(({ type, name }) => ({\n        srcSet: `${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n        })}, \n    ${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n            resolution: 1.5,\n        })} 1.5x, \n    ${urlBuilder.getSanityUrl({\n            ...urlConfig,\n            format: name,\n            resolution: 2,\n        })} 2x`,\n        type,\n    })), [formats, baseUrl]);\n    return { src, srcSets, lowResSrc, size };\n};\nexport default useSanityImage;\n","import React from 'react';\nimport useImgLazyLoad from './useImgLazyLoad';\nconst Image = ({ size, srcSets, style, imgStyle, aspectRatio, className, imgClassName, lowResSrc, ...props }) => {\n    const { loaded, preloaded, onLoaded } = useImgLazyLoad(lowResSrc);\n    return (React.createElement(\"div\", { style: {\n            width: size.height * aspectRatio,\n            height: size.height,\n            maxHeight: '100%',\n            maxWidth: '100%',\n            lineHeight: 0,\n            filter: loaded ? 'blur(0px)' : 'blur(10px)',\n            transition: 'filter 200ms ease',\n            backgroundPosition: 'center',\n            backgroundSize: 'cover',\n            backgroundImage: lowResSrc !== undefined ? `url(${lowResSrc})` : undefined,\n            ...style,\n        }, className: className }, preloaded && (React.createElement(\"picture\", { style: { lineHeight: 0 } },\n        srcSets &&\n            srcSets.map(srcSet => React.createElement(\"source\", Object.assign({ key: srcSet.type }, srcSet))),\n        React.createElement(\"img\", Object.assign({ className: imgClassName, style: {\n                width: '100%',\n                height: '100%',\n                opacity: loaded ? 1 : 0,\n                transition: 'opacity 200ms ease',\n                objectFit: 'cover',\n                objectPosition: 'center',\n                boxSizing: 'border-box',\n                ...imgStyle,\n            }, loading: \"lazy\", onLoad: onLoaded }, props))))));\n};\nexport default Image;\nexport { useImgLazyLoad, Image };\nexport { default as useContentfulImage } from './useContentfulImage';\nexport { default as useSanityImage } from './useSanityImage';\n"],"names":["Image"],"mappings":"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"}